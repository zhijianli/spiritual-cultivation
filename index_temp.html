<!DOCTYPE html>
<html>
<head>
  <!-- Include Quill stylesheet -->
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
</head>
<body>
  <!-- Create the editor container -->
  <div id="editor">
    <p>Hello World!</p>
  </div>


  <!-- Include the Quill library -->
  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

  <!-- Include the Quill Image Upload module -->
  <script src="https://cdn.jsdelivr.net/npm/quill-image-upload"></script>

  <!-- Initialize Quill editor -->
  <script>
    var toolbarOptions = [
      ['bold', 'italic', 'underline', 'strike'],        // 样式
      ['link', 'image'],                                // 链接和图片
      ['clean']                                         // 清除格式
    ];

    var quill = new Quill('#editor', {
      theme: 'snow',
      modules: {
        toolbar: toolbarOptions,
        imageUpload: {
          url: '/upload',                              // 上传图片的后端接口URL
          method: 'POST',                              // 图片上传请求的方法
          name: 'image',                               // 图片上传字段的名称
          withCredentials: false,                      // 是否发送跨域请求的凭据
          headers: {
            'X-CSRF-Token': 'your-csrf-token'           // 如果需要，可以设置自定义的请求头
          },
          callbackOK: (imageUrl, imageAlt) => {         // 图片上传成功的回调函数
            var range = quill.getSelection();
            quill.insertEmbed(range.index, 'image', imageUrl, Quill.sources.USER);
            quill.setSelection(range.index + 1, Quill.sources.SILENT);
          },
          callbackKO: (error, response) => {             // 图片上传失败的回调函数
            console.error(error);
          }
        }
      }
    });
  </script>
</body>
</html>
